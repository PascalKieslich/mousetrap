<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Map trajectories to prototypes. — mt_map • mousetrap</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Map trajectories to prototypes. — mt_map"><meta property="og:description" content="mt_map maps trajectories onto a predefined set of prototype
trajectories. It first computes distances between the trajectories and each
of the supplied trajectory types and then assigns each trajectory to the
prototype that produced the smallest distance."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mousetrap</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/mousetrap-package.html">Overview</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/pascalkieslich/mousetrap" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Map trajectories to prototypes.</h1>
    <small class="dont-index">Source: <a href="https://github.com/pascalkieslich/mousetrap/blob/HEAD/R/map.R" class="external-link"><code>R/map.R</code></a></small>
    <div class="hidden name"><code>mt_map.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>mt_map</code> maps trajectories onto a predefined set of prototype
trajectories. It first computes distances between the trajectories and each
of the supplied trajectory types and then assigns each trajectory to the
prototype that produced the smallest distance.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">mt_map</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  use <span class="op">=</span> <span class="st">"ln_trajectories"</span>,</span>
<span>  save_as <span class="op">=</span> <span class="st">"prototyping"</span>,</span>
<span>  dimensions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"xpos"</span>, <span class="st">"ypos"</span><span class="op">)</span>,</span>
<span>  prototypes <span class="op">=</span> <span class="fu">mousetrap</span><span class="fu">::</span><span class="va"><a href="mt_prototypes.html">mt_prototypes</a></span>,</span>
<span>  weights <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">dimensions</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  pointwise <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  na_rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  minkowski_p <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  use2 <span class="op">=</span> <span class="st">"data"</span>,</span>
<span>  grouping_variables <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>a mousetrap data object created using one of the mt_import
functions (see <a href="mt_example.html">mt_example</a> for details). Alternatively, a trajectory
array can be provided directly (in this case <code>use</code> will be ignored).</p></dd>


<dt>use</dt>
<dd><p>a character string specifying which trajectory data should be
used.</p></dd>


<dt>save_as</dt>
<dd><p>a character string specifying where the resulting data should
be stored.</p></dd>


<dt>dimensions</dt>
<dd><p>a character vector specifying which trajectory variables
should be used. Can be of length 2 or 3 for two-dimensional or
three-dimensional trajectories respectively.</p></dd>


<dt>prototypes</dt>
<dd><p>a trajectory array containing the prototypes the
trajectories are mapped to. As a starting point, the trajectories stored in
<a href="mt_prototypes.html">mt_prototypes</a> can be used. See Details and Examples for selecting
prototypes and creating new ones.</p></dd>


<dt>weights</dt>
<dd><p>numeric vector specifying the relative importance of the
variables specified in <code>dimensions</code>. Defaults to a vector of 1s
implying equal importance. Technically, each variable is rescaled so that
the standard deviation matches the corresponding value in <code>weights</code>.
To use the original variables, set <code>weights = NULL</code>.</p></dd>


<dt>pointwise</dt>
<dd><p>boolean specifying the way dissimilarity between the
trajectories is measured (see Details). If <code>TRUE</code> (the default),
<code>mt_distmat</code> measures the average dissimilarity and then sums the
results. If <code>FALSE</code>, <code>mt_distmat</code>  measures dissimilarity once
(by treating the various points as independent dimensions).</p></dd>


<dt>na_rm</dt>
<dd><p>logical specifying whether trajectory points containing NAs
should be removed. Removal is done column-wise. That is, if any trajectory
has a missing value at, e.g., the 10th recorded position, the 10th position
is removed for all trajectories. This is necessary to compute distance
between trajectories.</p></dd>


<dt>minkowski_p</dt>
<dd><p>an integer specifying the distance metric.
<code>minkowski_p = 1</code> computes the city-block distance, <code>minkowski_p 
  = 2</code> (the default) computes the Euclidian distance, <code>minkowski_p = 3</code>
the cubic distance, etc.</p></dd>


<dt>use2</dt>
<dd><p>an optional character string specifying where the data that
contain the variables used for grouping can be found (in case
<code>grouping_variables</code> are specified). Defaults to "data" as
<code>data[["data"]]</code> usually contains all non mouse-tracking trial data.</p></dd>


<dt>grouping_variables</dt>
<dd><p>a character string (or vector) specifying one or
more variables in <code>use2</code>. If specified, prototypes will be rescaled
separately to match the coordinate system of the trajectories for each
level of the variable(s). If unspecified (the default), the prototypes are
rescaled in the same way across all trajectories.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>A mousetrap data object (see <a href="mt_example.html">mt_example</a>) with an additional
<a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a> (by default called <code>prototyping</code>) that contains the
best fitting prototype for each trajectory (the number of the prototype is
specified under <code>prototype</code>, the label of the prototype under
<code>prototype_label</code>) and the distance of the trajectory to the best
fitting prototype (<code>min_dist</code>). If a trajectory array was provided
directly as <code>data</code>, only the data.frame containing the results will be
returned.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Mouse trajectories often occur in distinct, qualitative types (see Wulff et
al., 2019; Wulff et al., 2022). Common trajectory types are linear
trajectories, mildly and strongly curved trajectories, and single and
multiple change-of-mind trials. <code>mt_map</code> allows to map trajectories to a
predefined set of trajectory types.</p>
<p>First, <code>mt_map</code> adjusts prototypes to match the coordinate system of the
trajectories specified by <code>use</code>. Next, <code>mt_map</code> computes the
distances between each trajectory and each of the supplied prototypes (see
<a href="mt_distmat.html">mt_distmat</a>) and then assigns each trajectory to the closest prototype
(i.e., the prototype that produced the smallest distance).</p>
<p>Mapping trajectories to prototypes requires that the endpoints of all
trajectories (and added prototypes) share the same direction, i.e., that all
trajectories end in the top-left corner of the coordinate system
(<a href="mt_remap_symmetric.html">mt_remap_symmetric</a> or <a href="mt_align.html">mt_align</a> can be used to achieve this).
Furthermore, it is recommended to use length normalized trajectories (see
<a href="mt_length_normalize.html">mt_length_normalize</a>; Wulff et al., 2019, Wulff et al., 2023).</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Wulff, D. U., Haslbeck, J. M. B., Kieslich, P. J., Henninger, F.,
&amp; Schulte-Mecklenbeck, M. (2019). Mouse-tracking: Detecting types in
movement trajectories. In M. Schulte-Mecklenbeck, A. Kühberger, &amp; J. G.
Johnson (Eds.), <em>A Handbook of Process Tracing Methods</em> (pp. 131-145).
New York, NY: Routledge.</p>
<p>Wulff, D. U., Kieslich, P. J., Henninger, F., Haslbeck, J. M. B., &amp;
Schulte-Mecklenbeck, M. (2023). <em>Movement tracking of psychological
processes: A tutorial using mousetrap.</em> PsyArXiv.
<a href="https://doi.org/10.31234/osf.io/v685r" class="external-link">doi:10.31234/osf.io/v685r</a></p>
<p>Wulff, D. U., Haslbeck, J. M. B., &amp; Schulte-Mecklenbeck, M. (2022).
<em>Measuring the (dis-)continuous mind: What movement trajectories
reveal about cognition</em>. Manuscript in preparation.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Dirk U. Wulff</p>
<p>Jonas M. B. Haslbeck</p>
<p>Pascal J. Kieslich</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Length normalize trajectories</span></span></span>
<span class="r-in"><span><span class="va">KH2017</span> <span class="op">&lt;-</span> <span class="fu"><a href="mt_length_normalize.html">mt_length_normalize</a></span><span class="op">(</span><span class="va">KH2017</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map trajectories onto standard prototype set</span></span></span>
<span class="r-in"><span><span class="va">KH2017</span> <span class="op">&lt;-</span> <span class="fu">mt_map</span><span class="op">(</span><span class="va">KH2017</span>,</span></span>
<span class="r-in"><span>  use<span class="op">=</span><span class="st">"ln_trajectories"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot prototypes</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mt_plot.html">mt_plot</a></span><span class="op">(</span><span class="va">mt_prototypes</span>,facet_col<span class="op">=</span><span class="st">"mt_id"</span><span class="op">)</span> <span class="op">+</span> </span></span>
<span class="r-in"><span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_grid.html" class="external-link">facet_grid</a></span><span class="op">(</span><span class="va">.</span><span class="op">~</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">mt_id</span>,levels<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">mt_id</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mt_map-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Plot trajectories per assigned prototype</span></span></span>
<span class="r-in"><span><span class="fu"><a href="mt_plot.html">mt_plot</a></span><span class="op">(</span><span class="va">KH2017</span>,use<span class="op">=</span><span class="st">"ln_trajectories"</span>,</span></span>
<span class="r-in"><span>  use2<span class="op">=</span><span class="st">"prototyping"</span>,facet_col<span class="op">=</span><span class="st">"prototype_label"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="mt_map-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map trajectories onto reduced prototype set</span></span></span>
<span class="r-in"><span><span class="va">KH2017</span> <span class="op">&lt;-</span> <span class="fu">mt_map</span><span class="op">(</span><span class="va">KH2017</span>,</span></span>
<span class="r-in"><span>  use<span class="op">=</span><span class="st">"ln_trajectories"</span>,</span></span>
<span class="r-in"><span>  prototypes<span class="op">=</span><span class="va">mt_prototypes</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"straight"</span>,<span class="st">"curved"</span>,<span class="st">"cCoM"</span><span class="op">)</span>,,<span class="op">]</span>,</span></span>
<span class="r-in"><span>  save_as<span class="op">=</span><span class="st">"prototyping_red"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map trajectories onto extended prototype set</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add additional prototypes</span></span></span>
<span class="r-in"><span><span class="va">mt_prototypes_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="mt_add_trajectory.html">mt_add_trajectory</a></span><span class="op">(</span><span class="va">mt_prototypes</span>,</span></span>
<span class="r-in"><span>   xpos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span>,<span class="fl">1</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, ypos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.5</span>,<span class="fl">1.5</span>,<span class="fl">1.5</span>,<span class="fl">1.5</span><span class="op">)</span>, id <span class="op">=</span> <span class="st">"dCoM3"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">mt_prototypes_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="mt_add_trajectory.html">mt_add_trajectory</a></span><span class="op">(</span><span class="va">mt_prototypes_ext</span>,</span></span>
<span class="r-in"><span>   xpos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span>,<span class="op">-</span><span class="fl">1</span><span class="op">)</span>, ypos <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1.5</span>,<span class="fl">1.5</span><span class="op">)</span>, id <span class="op">=</span> <span class="st">"neutral"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Map trajectories</span></span></span>
<span class="r-in"><span><span class="va">KH2017</span> <span class="op">&lt;-</span> <span class="fu">mt_map</span><span class="op">(</span><span class="va">KH2017</span>,</span></span>
<span class="r-in"><span>  use<span class="op">=</span><span class="st">"ln_trajectories"</span>, prototypes<span class="op">=</span><span class="va">mt_prototypes_ext</span>,</span></span>
<span class="r-in"><span>  save_as<span class="op">=</span><span class="st">"prototyping_ext"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Pascal J. Kieslich, Dirk U. Wulff, Felix Henninger, Jonas M. B. Haslbeck.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

